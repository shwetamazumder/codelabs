<!-- Include the generated JS file -->
<script src="codelabs/docs/codelabs-list.js"></script>

<script>
  const cardsContainer = document.getElementById('cards');
  const searchInput = document.getElementById('search');
  const countEl = document.getElementById('count');

  function renderCards(codelabs) {
    cardsContainer.innerHTML = '';
    codelabs.forEach((lab, index) => {
      const card = document.createElement('a');
      card.className = 'card';
      card.href = lab.href;

      card.innerHTML = `
        <div class="card-body">
          <div class="card-meta">
            <span class="badge">${index + 1}</span>
            <span class="duration">⏱ ${lab.duration}</span>
          </div>
          <h3>${lab.title}</h3>
          <p>${lab.category.join(', ')}</p>
        </div>
        <div class="arrow">→</div>
      `;

      cardsContainer.appendChild(card);
    });

    countEl.textContent = `${codelabs.length} codelabs available`;
  }

  // Initial render
  renderCards(window.CODELABS);

  // Search functionality
  searchInput.addEventListener('input', () => {
    const query = searchInput.value.toLowerCase();
    const filtered = window.CODELABS.filter(lab => {
      return (
        lab.title.toLowerCase().includes(query) ||
        lab.category.join(' ').toLowerCase().includes(query) ||
        lab.tags.join(' ').toLowerCase().includes(query)
      );
    });

    renderCards(filtered);
  });
</script>
